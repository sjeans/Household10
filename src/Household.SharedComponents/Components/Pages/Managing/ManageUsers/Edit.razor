@page "/managing/manageusers/edit/{Id:int}"

@using Microsoft.AspNetCore.Components.Forms
@using Household.SharedComponents.Components.Shared
@using Household.SharedComponents.Components.Shared.Forms
@using Household.SharedComponents.Components.Shared.Loader
@using Household.SharedComponents.Components.Shared.Messages

<PageTitle>Edit User @_username</PageTitle>

@rendermode @(new InteractiveServerRenderMode(prerender: false))

<div class="mb-3">
    <h2 class="h2 mb-2 fw-semibold">Edit User</h2>
    <p class="text-muted small">@_username</p>
@if (PageHistoryState.CanGoBack())
{
    <p class="text-start"><a href="@PageHistoryState.GetGoBackPage()">Go Back</a></p>
}
</div>

<Notification @ref="_notification" />

<Loading @ref="_loadingIndicator" />

 <section id="user" class="row">
@if (_editUser != null)
{
<CascadingValue Value="IsEnabled">
<EditForm FormName="editUser" EditContext=@EditContextRef OnSubmit="@HandleSubmit" class="form-control h-auto">
    <AddEditUser UserRef="@_editUser" UserId="@Id" CanSave="@_canSave" CanShow="@_canShow" Client="@_client" ComponentNotification="_notification" Message="@_message" />
</EditForm>
</CascadingValue>

    <AddEditMessage Message="@_message" Type="user" />
}
</section>
